<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Reaction Time Test â€“ How Fast Are You?</title>

<meta name="description" content="Test your reaction speed. Play 3 times for accurate results and see your reaction grade." />
<meta name="google-adsense-account" content="ca-pub-XXXXXXXXXXXXXXXX">

<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  height: 100vh;
  background: #8b0000;
  color: white;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  transition: background 0.15s ease;
  user-select: none;
}

#game {
  padding: 20px;
  width: 100%;
  max-width: 480px;
}

h1 { font-size: 2rem; margin-bottom: 8px; }

#sub {
  margin-top: 10px;
  white-space: pre-line;
  opacity: 0.9;
}

button {
  margin-top: 16px;
  padding: 12px 18px;
  font-size: 1rem;
  border-radius: 8px;
  border: none;
  cursor: pointer;
}

#character {
  width: 160px;
  margin: 14px auto;
}

.face {
  transition: transform 0.15s ease;
}

.bounce {
  animation: bounce 0.2s ease;
}

.shake {
  animation: shake 0.25s ease;
}

@keyframes bounce {
  0% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
  100% { transform: translateY(0); }
}

@keyframes shake {
  0% { transform: translateX(0); }
  25% { transform: translateX(-6px); }
  50% { transform: translateX(6px); }
  75% { transform: translateX(-6px); }
  100% { transform: translateX(0); }
}

#ad-container {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  min-height: 60px;
  background: #111;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.9rem;
  opacity: 0.85;
}
</style>
</head>

<body>

<div id="game">
  <h1 id="text">Tap when the screen turns GREEN</h1>

  <!-- SVG CARTOON CHARACTER -->
  <svg id="character" viewBox="0 0 200 200">
    <circle cx="100" cy="100" r="80" fill="#FFD966"/>
    <circle id="eyeL" cx="70" cy="80" r="8" fill="#000"/>
    <circle id="eyeR" cx="130" cy="80" r="8" fill="#000"/>
    <path id="mouth" d="M70 120 Q100 140 130 120" stroke="#000" stroke-width="5" fill="none"/>
  </svg>

  <div id="sub">
    For accurate results,<br>
    play this test <strong>3 times</strong>.<br><br>
    Tap anywhere to begin.
  </div>

  <button id="shareBtn" style="display:none;">Share your score</button>
</div>

<div id="ad-container">Advertisement</div>

<script>
let state = "idle";
let startTime, timer;
let attempts = [];
let lastScore = null;

const text = document.getElementById("text");
const sub = document.getElementById("sub");
const shareBtn = document.getElementById("shareBtn");
const face = document.getElementById("character");
const mouth = document.getElementById("mouth");

function setMouth(type) {
  if (type === "smile") mouth.setAttribute("d","M70 120 Q100 140 130 120");
  if (type === "open") mouth.setAttribute("d","M80 120 Q100 150 120 120");
  if (type === "flat") mouth.setAttribute("d","M70 130 Q100 130 130 130");
}

function animate(type) {
  face.classList.remove("bounce","shake");
  void face.offsetWidth;
  face.classList.add(type);
}

function getGrade(ms) {
  if (ms < 180) return {grade:"Elite âš¡", mood:"smile"};
  if (ms < 220) return {grade:"Fast ðŸŸ¢", mood:"smile"};
  if (ms < 260) return {grade:"Average ðŸŸ¡", mood:"flat"};
  return {grade:"Needs Practice ðŸ”´", mood:"flat"};
}

document.body.addEventListener("click", () => {
  if (state === "idle") {
    state = "waiting";
    text.innerText = "Wait for green...";
    sub.innerText = "";
    setMouth("flat");

    timer = setTimeout(() => {
      state = "go";
      startTime = performance.now();
      document.body.style.background = "green";
      text.innerText = "TAP!";
      setMouth("open");
      animate("bounce");
    }, Math.random() * 3000 + 1000);

  } else if (state === "waiting") {
    clearTimeout(timer);
    state = "idle";
    text.innerText = "Too soon!";
    setMouth("flat");
    animate("shake");

  } else if (state === "go") {
    const time = Math.round(performance.now() - startTime);
    lastScore = time;
    attempts.push(time);
    state = "idle";
    document.body.style.background = "#222";
    text.innerText = `Your time: ${time} ms`;

    if (attempts.length < 3) {
      sub.innerText = `Attempt ${attempts.length} of 3\nTap to continue`;
      setMouth("smile");
    } else {
      const best = Math.min(...attempts);
      const result = getGrade(best);
      sub.innerText = `Best: ${best} ms\nGrade: ${result.grade}`;
      setMouth(result.mood);
      animate("bounce");
      attempts = [];
      shareBtn.style.display = "inline-block";
    }
  }
});

shareBtn.addEventListener("click",(e)=>{
  e.stopPropagation();
  const txt = `My reaction time is ${lastScore} ms. Can you beat me?`;
  if (navigator.share) {
    navigator.share({title:"Reaction Test",text:txt,url:location.href});
  } else {
    navigator.clipboard.writeText(txt+" "+location.href);
    alert("Link copied!");
  }
});
</script>

</body>
</html>